{% extends "layouts/base.html" %}
{% load static %}

{% block title %}Home{% endblock title %}

{% block content %}
  <!-- [ breadcrumb ] start -->
  <div class="page-header">
    <div class="page-block">
      <div class="row align-items-center">
        <div class="col-md-12">
          <div class="page-header-title">
            <h5 class="mb-0">Home</h5>
          </div>
        </div>
        <div class="col-md-12">
          <ul class="breadcrumb mb-0">
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="row justify-content-center gap-5">
    <div class="col-md-6 col-xl-4">
      <a class="card" href={% url 'taskmanager:tasktype-list' %}>
        <div class="card-body card-hover">
          <h6 class="mb-4">Task Types</h6>
          <div class="row d-flex align-items-center">
            <div class="col-9">
              <h3 class="f-w-300 d-flex align-items-center m-b-0"><i data-feather="archive"></i></h3>
            </div>
            <div class="col-3 text-end">
              <h3 class="m-b-0">{{ tasktypes.count }}</h3>
            </div>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-6 col-xl-4">
      <a class="card" href={% url 'taskmanager:position-list' %}>
        <div class="card-body card-hover">
          <h6 class="mb-4">Positions</h6>
          <div class="row d-flex align-items-center">
            <div class="col-9">
              <h3 class="f-w-300 d-flex align-items-center m-b-0"><i data-feather="table"></i></h3>
            </div>
            <div class="col-3 text-end">
              <h3 class="m-b-0">{{ positions.count }}</h3>
            </div>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-6 col-xl-4">
      <a class="card" href={% url 'taskmanager:worker-list' %}>
        <div class="card-body card-hover">
          <h6 class="mb-4">Workers</h6>
          <div class="row d-flex align-items-center">
            <div class="col-9">
              <h3 class="f-w-300 d-flex align-items-center m-b-0"><i data-feather="monitor"></i></h3>
            </div>
            <div class="col-3 text-end">
              <h3 class="m-b-0">{{ workers.count }}</h3>
            </div>
          </div>
        </div>
      </a>
    </div>

    <div class="col-md-6 col-xl-4">
      <a class="card" href={% url 'taskmanager:task-list' %}>
        <div class="card-body card-hover">
          <h6 class="mb-4">Tasks</h6>
          <div class="row d-flex align-items-center">
            <div class="col-9">
              <h3 class="f-w-300 d-flex align-items-center m-b-0"><i data-feather="lock"></i></h3>
            </div>
            <div class="col-3 text-end">
              <h3 class="m-b-0">{{ tasks.count }}</h3>
            </div>
          </div>
        </div>
      </a>
    </div>

  </div>
  <div class="row justify-content-center">
    <!-- [ Recent Users ] start -->
    <div class="col-xl-8 col-md-6">
      <div class="card Recent-Users ">
        <div class="card-header d-flex align-items-center justify-content-between">
          <h5 class="mb-0">NEAREST DEADLINE | {{ nearest_deadline.name }}</h5>
          <h6 class="text-muted mb-0">
            <i class="fas fa-circle text-success f-10 m-r-15"></i>{{ nearest_deadline.deadline|date:"d M Y H:i" }}
          </h6>
        </div>
        <div class="card-body px-0 py-0">
          <div class="table-responsive">
            <table class="table">
              <tbody>
              <tr class="unread border-bottom-info">
                <td><img class="rounded-circle" style="width:40px;" src="{% static "assets/images/user/avatar-2.jpg" %}"
                         alt="activity-user"></td>
                {% for assignee in nearest_deadline.assignees.all %}
                  <td>
                    <h6 class="mb-1">{{ assignee.username }}</h6>
                    <p class="m-0">{{ assignee.position }}</p>
                  </td>
                {% endfor %}
              </tr>
              </tbody>
            </table>
            <a href={% url 'taskmanager:task-detail' nearest_deadline.id %} class="badge bg-brand-color-1 text-white
               f-12 float-start mt-n1 m-2">View</a>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
{% block extra_js %}
  <script src="{% static "assets/js/plugins/apexcharts.min.js" %}"></script>
  <script src="{% static "assets/js/plugins/jsvectormap.min.js" %}"></script>
  <script src="{% static "assets/js/plugins/world.js" %}"></script>
  <script src="{% static "assets/js/pages/dashboard-default.js" %}"></script>
{% endblock extra_js %}
